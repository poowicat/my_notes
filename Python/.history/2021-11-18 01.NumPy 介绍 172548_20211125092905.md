

#### numpy概念

- NumPy（Numerical Python）是Python的一种开源的数值计算扩展。
- 这种工具可用来存储和处理大型矩阵，比Python自身的嵌套列表（nested list structure)结构要高效的多（该结构也可以用来表示矩阵（matrix））
- 支持大量的维度数组与矩阵运算，此外也针对数组运算提供大量的数学函数库  。

#### Numpy介绍

- 用Python实现的科学计算
- 包括：
  1. 强大的N维数组对象Array
  2. 比较成熟的函数库；
  3. 用于整合C/C++和Fortran代码的工具包
  4. 实现线性代数、傅里叶变换和随机数生成函数
  5. numpy和稀疏矩阵运算包scipy配合使用更加方便
- numpy提供了高级的数值编程工具：矩阵数据类型、矢量处理、以及精密的运算库
- 专为严格的数字处理而生

#### 数据类型ndarray

##### 定义

NumPy提供了一个**N维数组类型ndarray**，它描述了**相同类型**的“items”的集合。

##### Ndarray与原生Python列表的区别

- 从图中我们可以看出ndarray在存储数据的时候，数据与数据的地址都是连续的，这样就给使得批量操作数组元素时速度更快。
- 这是因为**ndarray**中的所有**元素的类型都是相同的**，而**Python列表**中的**元素类型是任意的**；
- 所以**ndarray**在存储元素时**内存可以连续**，而python原生list就只能通过**寻址方式**找到下一个元素，
- 导致通用**性能方面Numpy的ndarray不及Python原生**list；
- **Numpy的ndarray就可以省掉很多循环语句**。
- numpy内置了并行运算功能，当系统有多个核心时，做某种计算时，numpy会自动做并行运算；
- numpy底层使用C语言编写，**数组中直接存储对象**，而不是存储对象指针，所以其运算效率远高于纯Python代码

![img](../../%E5%9B%BE%E7%89%87/format,f_auto.png)



#### ndarray属性



#### NumPy数据类型

- numpy支持的数据类型比Python内置的类型多得多

- 基本上可以和C语言数据类型对应上

- 其中部分类型对应为Python内置的类型

- 下表举例常用的numpy基本类型


| 名称       | 描述                                                         |
| :--------- | :----------------------------------------------------------- |
| bool_      | 布尔型数据类型（True 或者 False）                            |
| int_       | 默认的整数类型（类似于 C 语言中的 long，int32 或 int64）     |
| intc       | 与 C 的 int 类型一样，一般是 int32 或 int 64                 |
| intp       | 用于索引的整数类型（类似于 C 的 ssize_t，一般情况下仍然是 int32 或 int64） |
| int8       | 字节（-128 to 127）                                          |
| int16      | 整数（-32768 to 32767）                                      |
| int32      | 整数（-2147483648 to 2147483647）                            |
| int64      | 整数（-9223372036854775808 to 9223372036854775807）          |
| uint8      | 无符号整数（0 to 255）                                       |
| uint16     | 无符号整数（0 to 65535）                                     |
| uint32     | 无符号整数（0 to 4294967295）                                |
| uint64     | 无符号整数（0 to 18446744073709551615）                      |
| float_     | float64 类型的简写                                           |
| float16    | 半精度浮点数，包括：1 个符号位，5 个指数位，10 个尾数位      |
| float32    | 单精度浮点数，包括：1 个符号位，8 个指数位，23 个尾数位      |
| float64    | 双精度浮点数，包括：1 个符号位，11 个指数位，52 个尾数位     |
| complex_   | complex128 类型的简写，即 128 位复数                         |
| complex64  | 复数，表示双 32 位浮点数（实数部分和虚数部分）               |
| complex128 | 复数，表示双 64 位浮点数（实数部分和虚数部分）               |

#### 数据类型对象 (dtype)

##### 定义

描述与数组对应的内存区域是如何使用的，描述数据以下几个方面：

- 数据类型（整数，浮点数或者Python对象）
- 数据大小（例如，整数使用多少个字节存储）
- 数据的字节顺序（小端法或大端法）
- 在结构化类型的情况下，字段的名称，每个字段的数据类型和每个字段所取的内存块的部分；
- 如果数据类型，是子数组，那么它的形状和数据诶下是什么

##### 字节顺序

- 由<或>来决定的。

- <意味着小端法（最小存储在最小的地址，即低位组放在前面）。

- > 意味着大端法（最重要的字节存储在最小的地址，即高位组放在最前面）

##### dtype对象语法构造

`numpy.dtype(object，align， copy)`

- obj - 要转换为的数据类型对象
- align - 如果为true，填充字段使其类似C的结构体
- copy - 复制dtype对象，如果为false，则是对内置数据类型对象的引用

##### 实例

```python

# 数据类型对象 - 舒使用标量类型
dt = np.dtype(np.int32)
print(dt)  # int32


# 数据类型对象 - 创建结构化数据类型
dt = np.dtype([('age', np.int8)])
print(dt)  # [('age', 'i1')]

# 数据类型对象 - 将数据类型应用于ndarray对象
dt = np.dtype([('age', np.int8)])
a = np.array([(10,), (20,), (30,)], dtype=dt)
print(a)  # [(10,) (20,) (30,)]

# 数据类型对象 - 类型字段名可以用于存取实际的 age 列
dt = np.dtype([('age', np.int8)])
a = np.array([(10,), (20,), (30,)], dtype=dt)
print(a['age'])  # [10 20 30]

"""
数据类型对象 - 定义一个结构化数据类型 student，包含字符串字段 name，整数字段 age，及浮点字段 marks，并将这个 dtype 应用到 ndarray 对象。
"""
# 数据类型对象 - 定义结构化数据类型student
student = np.dtype([('name', 'S20'), ('age', 'i1'), ('marks', 'f4')])
print(student)

# 数据类型对象 - 将这个dtype应用到ndarray对象
student = np.dtype([('name', 'S20'), ('age', 'i1'), ('marks', 'f4')])
a = np.array([('abc', 21, 50), ('xyz', 12, 114), ('hzy', 666, 666)])
print(a)
# [['abc' '21' '50']
#  ['xyz' '12' '114']
#  ['hzy' '666' '666']]
```

##### 数据类型唯一定义字符代码

| 字符 | 对应类型              |
| ---- | --------------------- |
| b    | 布尔型                |
| i    | (有符号) 整型         |
| u    | 无符号整型 integer    |
| f    | 浮点型                |
| c    | 复数浮点型            |
| m    | timedelta（时间间隔） |
| M    | datetime（日期时间）  |
| O    | (Python) 对象         |
| S, a | (byte-)字符串         |
| U    | Unicode               |
| V    | 原始数据 (void)       |



#### NumPy 数组属性

- NumPy数组的维数称为秩，秩就是轴的**数量**，即**数组维度**，N维数组的秩为n；

- 比如说，二维数组相当于是两个一维数组，其中第一个一维数组中每个元素又是一个一维数组;

- 所以一维数组就是 NumPy 中的轴（axis），第一个轴相当于是底层数组，第二个轴是底层数组里的数组。而轴的数量——秩，就是数组的维数。

- 可以声明axis 。

- axis=0表示沿着第0轴进行操作，即对每一列进行操作；

- axis=1，表示沿着第一轴进行操作，即对每一行进行操作；

- NumPy的数组中比较重要的ndarray对象属性有：

  | 属性             | 说明                                                         |
  | ---------------- | ------------------------------------------------------------ |
  | ndarray.ndim     | 秩，即轴的数量或维度的数量                                   |
  | ndarray.shape    | 数组的维度，对于矩阵，n行m列                                 |
  | ndarray.size     | 数组元素的总个数，相当于.shape中n*m的值                      |
  | ndarray.dtype    | ndarray对象的元素类型                                        |
  | ndarray.itemsize | ndarray对象中每个元素的大小，以字节为单位                    |
  | ndarray.flags    | ndarray对象的内存信息                                        |
  | ndarray.real     | ndarray元素的实部                                            |
  | ndarray.imag     | ndarray元素的虚部                                            |
  | ndarray.data     | 包含实际数组元素的缓冲区，由于一般通过数组的索引获取元素，所以通常不需要使用这个属性。 |

#### NumPy应用

- 与SciPy（scientific Python）和 Matplotlib（绘图库）一起使用

- 以上组合广泛用于代替MatLab。是一个强大的科学计算环境，有助于我们通过Python学习数据科学或机器学习

- SciPy是一个开源的Python算法库和数学工具包

- SciPy包含的模块有最优化、线性代数、积分、插值、特殊函数、快速傅里叶变换、信号处理和图形处理、常微分方程求解

- Matplotlib是Python编程语言及其数值数学扩展包Numpy的**可视化操作界面**。它为利用通用的图形用户界面工具包，如Tkinter，wxPython，Qt或GTK+向应用程序嵌入式绘图提供了应用程序接口（API)

  

[参考]: https://baike.baidu.com/item/numpy/5678437?fr=aladdin	"百度百科NumPy"



